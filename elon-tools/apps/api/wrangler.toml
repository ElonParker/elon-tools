name = "elon-tools-api"
main = "src/index.ts"
compatibility_date = "2024-06-15"
compatibility_flags = ["nodejs_compat"]

# ── Environment Variables (non-secret) ──
[vars]
ENVIRONMENT = "production"
FRONTEND_URL = "https://elon-tools.pages.dev"

# ── D1 Database ──
[[d1_databases]]
binding = "DB"
database_name = "elon-tools-db"
database_id = "45783f4e-c689-4acb-92c9-3eff4408180e"
migrations_dir = "migrations"

# ── KV Namespace ──
[[kv_namespaces]]
binding = "KV"
id = "b1fe7c29518c4cf3a77c9625fb736a97"

# ── Vectorize Index (requires Vectorize permission — enable later) ──
# [[vectorize]]
# binding = "VECTORIZE"
# index_name = "elon-tools-vectors"

# ── Workers AI ──
[ai]
binding = "AI"

# ── Production Environment ──
[env.production]
name = "elon-tools-api"
[env.production.vars]
ENVIRONMENT = "production"
FRONTEND_URL = "https://elon-tools.pages.dev"

[[env.production.d1_databases]]
binding = "DB"
database_name = "elon-tools-db"
database_id = "45783f4e-c689-4acb-92c9-3eff4408180e"
migrations_dir = "migrations"

[[env.production.kv_namespaces]]
binding = "KV"
id = "b1fe7c29518c4cf3a77c9625fb736a97"

# [[env.production.vectorize]]
# binding = "VECTORIZE"
# index_name = "elon-tools-vectors"

[env.production.ai]
binding = "AI"

# ── Secrets (set via `wrangler secret put`) ──
# TURNSTILE_SECRET_KEY
# MASTER_ENCRYPTION_KEY
# EMAIL_API_KEY
